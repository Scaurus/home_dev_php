function onMyviIframeAPIReady(){SP.myviReady()}function onYouTubeIframeAPIReady(){SP.youtubeReady()}var SP=function(){if(typeof SP!="undefined")return SP;var c=!1,l=!1,p=this,w={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows()}},o=splayer.assetsroot?splayer.assetsroot:"http://s3.spruto.org/images/",v='div.splayer{display:block;position:relative;background-color:#000}div.splayer .preview{position:relative;width:100%;height:100%;z-index:1;cursor:pointer;background-repeat:no-repeat;background-position:center center;-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:cover;}div.splayer .preview.playlist{z-index:1}div.splayer a.play-button:before{content:"";display:block;padding-top:100%}div.splayer a.play-button{background:url("'+o+'play-btn.png") no-repeat scroll center center;background-size:cover;-webkit-background-size:cover;left:50%;margin-left:-6.75%;margin-top:-6.75%;position:absolute;top:50%;width:13.5%;z-index:100}div.splayer iframe{cursor:pointer; opacity:.01;position:absolute;top:0;left:0;z-index:150}div.splayer iframe.play{opacity:1}div.splayer div.error{display:block;position:relative;width:100%;height:100%;line-height:100%;vertical-align:top;background-color:#303030}div.splayer div.error div.error-container{display:block;position:absolute;top:50%;width:100%}div.splayer div.error div.error-img{display:inline-block;margin:0 5% 0 10%;background-color:#883232;text-align:center;-webkit-border-radius:50em;-moz-border-radius:50em;-o-border-radius:50em;border-radius:50em;width:70px;height:70px}div.splayer div.error div.error-img span{color:white;display:inline-block;font-weight:bold;font-size:50px;vertical-align:middle;line-height:68px}div.splayer div.error span.error-text{width:63%;font-size:1.3em;display:inline-block;line-height:130%;vertical-align:middle;color:white;font-size:14px;font-family:Tahoma}.splayer{margin:0;padding:0;border:0;position:relative}.splayer .playlist-overlay{background:none repeat scroll 0 0 rgba(0,0,0,0.85);display:none;font-family:Tahoma;height:100%;left:0;position:absolute;text-align:center;top:0;width:100%;z-index:250}.splayer .playlist-overlay.after-play a.replay-btn{display:none}.splayer .playlist{display:block;height:58%;margin-top:35px;position:relative;text-align:left;width:100%}.splayer .playlist .arrow{position:absolute;display:inline-block;border-radius:100px;vertical-align:middle;top:45%}.splayer .playlist-overlay.square .arrow{top:35%}.splayer .playlist .arrow.right{padding:2.5%;right:.75%;background:rgba(255,255,255,0.1) url("'+o+'right-icon.png") 50% 50% no-repeat;background-size:35% auto}.splayer .playlist .arrow.left{padding:2.5%;left:.75%;background:rgba(255,255,255,0.1) url("'+o+'left-icon.png") 40% 50% no-repeat;background-size:35% auto}.splayer .playlist-content{width:85%;height:100%;margin:8% auto 0}.splayer .playlist-overlay.square .playlist-content{margin:17% auto 0}.splayer .nodisplay{display:none}.splayer .video-item{display:inline-block;height:46%;margin:0 0 3% 3.5%;overflow:hidden;position:relative;vertical-align:top;width:22.3%}.splayer .video-item.first{margin-left:0}.splayer .playlist-overlay.square .video-item{height:35%}.splayer .video-item .img{height:100%;width:100%;background-repeat:no-repeat;background-position:center center;-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:cover}.splayer .video-item .num{background:none repeat scroll 0 0 #000;border-radius:0 0 3px 3px;color:#969696;font-size:1.1em;left:3%;padding:1% 8% 2%;position:absolute;top:0;z-index:100}.splayer .playlist-overlay:not(.after-play) .video-item.current-video .replay-over{background:rgba(255,255,255,0.3);position:absolute;width:100%;height:99%;top:0;left:0;cursor:pointer;z-index:20}.splayer .video-item.current-video .replay-over .icon{background:url("'+o+'replay-big-icon.png") 0 0 no-repeat;width:20%;height:30%;position:relative;display:block;margin:22% auto 0;background-size:100% auto}.splayer .video-item .title-video{position:absolute;bottom:0;left:0;width:100%;background:rgba(51,51,51,0.7);color:#fff;z-index:1;padding:1% 0 2% 3%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.splayer .playlist-overlay:not(.after-play) .video-item.current-video .title-video{display:none}.splayer .replay-btn,.splayer .show-playlist-btn{border-radius:2px;color:#fff;display:inline-block;font-size:1.1em;line-height:2em;margin-top:2.5%;position:relative;text-align:center;text-decoration:none}.splayer .replay-btn{background:url("'+o+'replay-small-icon.png") no-repeat scroll 8% center / 12% auto rgba(255,255,255,0.1);padding:0 3% 0 8%}.splayer .show-playlist-container{display:block;position:relative;text-align:center}.splayer .show-playlist-btn{background:rgba(255,255,255,0.1);padding:0 3% 0 3%}.splayer .playlist-overlay.square .replay-btn{line-height:1.8em;font-size:1.1em;margin-top:0}',e=document.createElement("style");e.innerHTML=v;document.getElementsByTagName("head")[0].appendChild(e);e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";document.getElementsByTagName("head")[0].appendChild(e);e=document.createElement("script");e.src="//myvi.ru/player/content/scripts/iframe_api.min.js?v="+Math.floor(new Date/864e5);document.getElementsByTagName("head")[0].appendChild(e);var r={beforePlay:{none:"none",playlist:"playlist"},afterPlay:{black:"black",playlist:"playlist",nextvideo:"nextvideo",repeat:"repeat",start:"start",picture:"picture"},loopMode:{none:"none",playlist:"playlist"}},f={youtube:"youtube",video:"video",myvi:"myvi",unknown:"unknown"},y={"0":"unspecified_error"},u={playerClassName:"splayer",playBtnClassName:"play-button",previewClassName:"preview",videoUrlClassName:"video-url",videoTypeClassName:"type",playlistClassName:"playlist-overlay",playlistOptions:{defaultPosterURL:o+"default-poster.png",videoNotFoundPosterUrl:o+"video-not-found.jpg",playlistContentClass:"playlist-content",currentPlaylistContentClass:"current",nodisplayPlaylistContentClass:"nodisplay",currentVideoClass:"current-video"},localization:{ru:{repeat_button:"Повторить",video_not_found:"видео не найдено",show_playlist:"Показать плейлист",player:{unspecified_error:"Ошибка плеера. Проверьте доступность видео и правильность настройки плеера."}},en:{repeat_button:"Repeat",video_not_found:"video not found",show_playlist:"Show Playlist",player:{unspecified_error:"Player error. Check whether the video is available and whether the player is configured correctly."}}},getPlayerParamUrl:"http://spruto.com/cabinet/api/public/GetPlayerSettings"},n={show:function(n,t){Object.prototype.toString.call(n)==="[object Array]"||(n=[n]);typeof t!="string"&&(t="block");for(var i in n)typeof n[i]=="object"&&(n[i].style.display=t)},hide:function(n){Object.prototype.toString.call(n)==="[object Array]"||(n=[n]);for(var t in n)typeof n[t]=="object"&&(n[t].style.display="none")},createElement:function(n,t,i){var r=document.createElement(n),u;if(typeof t=="object")for(u in t)r.setAttribute(u,t[u]);return typeof i!="undefined"&&i.appendChild(r),r},removeElement:function(n){n.parentElement&&n.parentElement.removeChild(n)},addClass:function(n,t){n&&n.setAttribute("class",((n.getAttribute("class")||"")+" "+t).trim())},removeClass:function(n,t){var u,i,r;if(n){for(u=n.getAttribute("class").split(" "),i="",r=0;r<u.length;r++)u[r]!=t&&(i+=u[r].trim()+" ");i=i.trim();n.setAttribute("class",i)}},hasClass:function(n,t){return n&&n.getAttribute("class").split(" ").indexOf(t)!=-1}},a={getXmlHttp:function(){var n;try{n=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{n=new ActiveXObject("Microsoft.XMLHTTP")}catch(i){n=!1}}return n||typeof XMLHttpRequest=="undefined"||(n=new XMLHttpRequest),n},request:function(n,t,i,r,u,f,e,o){var s=this.getXmlHttp(),h;if(s.open(u||"GET",n+t,f===!0),Object.prototype.toString.call(r)==="[object Array]")for(h=0;h<r.length;h++)typeof r[h].header=="string"&&typeof r[h].value=="string"&&s.setRequestHeader(r[h].header,r[h].value);return(typeof i=="string"?s.setRequestHeader("Accept",i):s.setRequestHeader("Accept","application/json;charset=utf-8"),s.onreadystatechange=function(){if(s.readyState==4)if(s.status==200){var response=JSON&&JSON.parse(s.responseText)||eval("("+s.responseText+")");e&&e(response)}else o&&o(s.status,s.statusText)},s.send(null),s.status==200)?JSON.parse(s.responseText):null}},s={detectPlayerType:function(n){return n.indexOf(".mp4")!=-1?f.video:/^(?:(?:https?:)?\/\/)?www.youtube.com\//i.test(n)?f.youtube:/^(?:(?:https?:)?\/\/)?youtu.be\//.test(n)?f.youtube:/^https?:\/\/fs[0-9]*.myvi.ru\//i.test(n)?f.video:/^(?:(?:https?:)?\/\/)?([a-z0-9]*.)?myvi.ru\//i.test(n)||/^(?:(?:https?:)?\/\/)?([a-z0-9]*.)?myvi.tv\//i.test(n)?f.myvi:f.unknown},detectVideoType:function(n){return typeof n=="undefined"?null:n.indexOf(".mp4")!=-1?"video/mp4":null},getConstrainedString:function(n,t,i){return t[n]?n:i},getMyviVideoId:function(n){var t=n.replace(/\/+$/,""),r,i,u;if(/^(?:(?:https?:)?\/\/)?myvi.ru\/ru\/videodetail.aspx/i.test(t)){if(t=t.split("?")[1],t)for(r=t.split("&"),i=0;i<r.length;i++)r[i].split("=")[0]=="video"&&(t=r[i].split("=")[1])}else t.toLowerCase().indexOf("/embed/html/")!=-1?(t=t.split("/embed/html/")[1],t&&(t=t.split("?")[0])):(t.indexOf("?")!=-1&&(t=t.slice(0,t.indexOf("?"))),u=t.split("/"),t=u.pop(),t.length!=23&&t.indexOf("_")!=-1&&(t=t.slice(t.indexOf("_")+1)));return t},getYTVideoId:function(n){var r=undefined,u;if(/^(?:(?:https?:)?\/\/)?www.youtube.com\/v\//i.test(n))r=n.replace(/^(?:(?:https?:)?\/\/)?www.youtube.com\/v\//i,"");else if(/^(?:(?:https?:)?\/\/)?youtu.be\//.test(n))r=n.replace(/^(?:(?:https?:)?\/\/)?youtu.be\//,"");else for(u=n.split("?")[1].split("&"),i=0;i<u.length;i++)if(t=u[i].split("="),t[0]=="v"){r=t[1];break}return r},getDefaultPosterUrl:function(n){switch(n.type){case f.myvi:return"http://fs.myvi.ru/thumbnail/"+n.id+"/default_hq.jpg";case f.youtube:return"http://img.youtube.com/vi/"+n.id+"/hqdefault.jpg";default:return u.playlistOptions.defaultPosterURL}},checkParams:function(n){var u,t,e,i;if(n.playlist)for(u=0;u<n.playlist.length;u++){if(t=n.playlist[u],t.video){for(e=0;e<t.video.length;e++)i=t.video[e],i["default"]&&(t.default_url=i),i.type=this.detectVideoType(i.url);t.default_url||(t.default_url=t.video[0]);t.type=t.getVideoFunction?"video":this.detectPlayerType(t.default_url.url);switch(t.type){case f.myvi:t.id=this.getMyviVideoId(t.default_url.url);break;case f.youtube:t.id=this.getYTVideoId(t.default_url.url)}}t.posterUrl||(t.posterUrl=this.getDefaultPosterUrl(t));t.secondPosterUrl||(t.secondPosterUrl=t.posterUrl);t.thumbnailUrl||(t.thumbnailUrl=t.posterUrl)}else n.playlist=[];if(n.playlistIndex?n.playlistIndex<1?n.playlistIndex=1:n.playlistIndex>n.playlist.length&&(n.playlistIndex=n.playlist.length):n.playlistIndex=1,n.uiLanguage=this.getConstrainedString(n.uiLanguage,{ru:"ru",en:"en"},"en"),n.behavior){if(n.behavior.beforePlay=this.getConstrainedString(n.behavior.beforePlay,r.beforePlay,r.beforePlay.none),n.behavior.afterPlay=this.getConstrainedString(n.behavior.afterPlay,r.afterPlay,r.afterPlay.start),n.behavior.loopMode=this.getConstrainedString(n.behavior.loopMode,r.loopMode,r.loopMode.none),n.behavior.afterPlay==r.afterPlay.start)switch(n.behavior.beforePlay){case r.beforePlay.none:n.behavior.afterPlay=r.afterPlay.picture;break;case r.beforePlay.playlist:n.behavior.afterPlay=r.afterPlay.playlist}}else n.behavior={afterPlay:r.afterPlay.picture,beforePlay:r.beforePlay.none,loopMode:r.loopMode.none};return n},getParams:function(n,t,i){if(typeof n.UserID!="undefined"){var r="";typeof n.UserID!="undefined"&&(r+=(r.length?"&":"?")+"public_user_id="+n.UserID);typeof n.AlbumID!="undefined"&&(r+=(r.length?"&":"?")+"album_id="+n.AlbumID);typeof n.VideoID!="undefined"&&(r+=(r.length?"&":"?")+"video_id="+n.VideoID);a.request(u.getPlayerParamUrl,r,null,[{header:"Content-Type",value:"application/json;charset=utf-8"}],null,!0,function(n){t(s.checkParams(n))},i);return}if(typeof n.settingsUrl!="undefined"){a.request(n.settingsUrl,null,null,[{header:"Content-Type",value:"application/json;charset=utf-8"}],null,!0,function(n){t(s.checkParams(n))},i);return}setTimeout(function(){t(s.checkParams(n))},0)}},h=function(n,t){var i=u.localization[t];return typeof i==undefined&&(i=u.localization.en),i[n]};return{ready:!1,myviReady:function(){l=!0;c&&(this.ready=!0,splayer.SPReady())},youtubeReady:function(){c=!0;l&&(this.ready=!0,splayer.SPReady())},Player:function(t,i){var w={onError:[],onPlayerLoaded:[],onPlayerSkipped:[],onPlayerVideoComplete:[],onPlayerStopped:[],onPlayerStarted:[],onPlayerPaused:[],onPlayerPlaying:[],onPlayerRemainingTimeChange:[],onPlayerVolumeChange:[],onPlayerVideoStart:[]},v=function(n,t){var r=!0,i,u;if(w[n])for(i=0;i<w[n].length;i++)u=d(w[n][i],window,t),r=r&&u!==!1;return r},a=new function(){var t=this,i=!1,u=!1,r=undefined;this.onStateChange=undefined;this.onError=undefined;var f=function(){i=!0;r&&t.player.cueVideoById(r);u&&t.player.playVideo()},e=function(n){if(typeof t.onStateChange=="function")t.onStateChange(n)},o=function(n){if(typeof t.onError=="function")t.onError(n)};this.player=undefined;this.show=function(){t.player&&t.player.setSize("100%","100%")};this.hide=function(){t.player&&t.player.setSize("1px","1px")};this.loadVideo=function(u){if(r=u,t.player)i&&t.player.cueVideoById(u);else{for(var s="player",h=1;document.getElementById(s+"-"+ ++h)!=null;);s+="-"+h;n.createElement("div",{id:s},l);t.player=new window.YT.Player(s,{width:"1px",height:"1px",playerVars:{autoplay:"0",controls:"1",rel:"0",egm:"1",showsearch:"0",showinfo:"0",wmode:"opaque"},events:{onReady:f,onStateChange:e,onError:o}})}};this.play=function(){u=!0;i&&t.player.playVideo()}},st=function(t){return new function(){var r=this,i=undefined,e=function(){typeof r.onplay=="function"&&r.onplay()},o=function(){typeof r.onended=="function"&&r.onended()},s=function(){},u=function(){typeof r.onerror=="function"&&r.onerror()},f=function(){i.removeEventListener("canplay",arguments.callee);i.removeEventListener("canplaythrough",arguments.callee);i.play()};this.init=function(){typeof r.oninit=="function"&&r.oninit()};this.hide=function(){i.style.display="none"};this.play=function(){var h,c;if(i)i.style.display=null,i.play();else{for(i=n.createElement("video",{width:l.style.width,height:l.style.height},l),i.autoplay=!0,i.controls=!0,i.poster=t.posterUrl,h=0;h<t.video.length;h++)c=n.createElement("source",{type:t.video[h].type,src:t.video[h].url},i),c.addEventListener("error",u);i.addEventListener("play",e);i.addEventListener("ended",o);i.addEventListener("pause",s);i.addEventListener("error",u);i.addEventListener("canplay",f);i.addEventListener("canplaythrough",f);i.load();typeof r.onload=="function"&&r.onload()}};this.remove=function(){i&&(n.removeElement(i),i=undefined)}}},ht=function(t){return new function(){var u=undefined,i=undefined,v=undefined,y=undefined,r=this,f=function(){typeof r.oninit=="function"&&r.oninit()},e=function(){n.addClass(i.getIframe(),"play");i.setSize("100%","100%")},o=function(){n.removeClass(i.getIframe(),"play");i.setSize("1px","1px")},s=function(n){switch(n.data){case window.Myvi.PlayerState.BUFFERING:case window.Myvi.PlayerState.PLAYING:typeof r.onplay=="function"&&r.onplay();break;case window.Myvi.PlayerState.ENDED:typeof r.onended=="function"&&r.onended()}},h=function(){},c=function(){},a=function(){};this.init=function(){u=n.createElement("div",{id:"player"},l);i=new window.Myvi.Player({videoId:t.id,width:"1px",height:"1px",listeners:{onReady:f,onStateChange:s,onVolumeChange:c,onTimeChange:h,onError:a}})};this.hide=function(){o()};this.play=function(){e();i&&i.playVideo()};this.remove=function(){i&&i.destroy();u.parentNode.removeChild(u)}}},ct=function(t){return new function(){var f=undefined,e=undefined,i=this,r=function(t){switch(t.target.getPlayerState()){case window.YT.PlayerState.BUFFERING:case window.YT.PlayerState.PLAYING:n.addClass(a.player.getIframe(),"play");typeof i.onplay=="function"&&i.onplay();break;case window.YT.PlayerState.ENDED:n.removeClass(a.player.getIframe(),"play");typeof i.onended=="function"&&i.onended()}},u=function(){typeof i.onerror=="function"&&i.onerror()};this.init=function(){a.onStateChange=r;a.onError=u;a.loadVideo(t.id);a.show();typeof i.oninit=="function"&&i.oninit()};this.play=function(){a.show();a.play();typeof i.onload=="function"&&i.onload()};this.hide=function(){a.hide()};this.remove=function(){a.hide()}}},lt=function(n){switch(n.type){case f.myvi:return ht(n);case f.youtube:return ct(n);default:return st(n)}},it=function(t,r){var c,a,f;if(v("onError",{code:t})){var o=i?i.uiLanguage||"en":"en",s=n.createElement("div",{"class":"error unspecified-error"},l),u=n.createElement("div",{"class":"error-container"},s),p=n.createElement("div",{"class":"error-img"},u),w=n.createElement("span",{},p);w.textContent="!";c=n.createElement("span",{"class":"error-text"},u);c.textContent=h("player",o)[y[t]];u.style.marginTop="-"+u.offsetHeight/2+"px";r&&(a=n.createElement("div",{"class":"show-playlist-container"},u),f=n.createElement("a",{href:"javascript:void(0)","class":"show-playlist-btn"},a),f.innerHtml+=h("show_playlist",o),f.addEventListener("click",function(){n.removeElement(s);n.show([e.preview]);f(!0)}))}},d=function(n,t){for(var u=Array.prototype.slice.call(arguments,2),i=n.split("."),f=i.pop(),r=0;r<i.length;r++)t=t[i[r]];return t[f].apply(t,u)},o=undefined,c=undefined,g=undefined,nt=!1,l=document.getElementById(t),b=i.Width||i.width,k=i.Height||i.height,e;b&&(b.toString().match(/(?:%|in|cm|mm|em|ex|pt|pc|px)$/)||(b=b+"px"),l.style.width=b);k&&(k.toString().match(/(?:%|in|cm|mm|em|ex|pt|pc|px)$/)||(k=k+"px"),l.style.height=k);n.addClass(l,"splayer");e={playBtn:undefined,preview:undefined,playlist:undefined};e.preview=n.createElement("div",{"class":"preview nodisplay"},l);e.playBtn=n.createElement("a",{"class":"play-button nodisplay",href:"javascript:void(0)"},l);var tt=function(t){e.preview.style.backgroundImage="url("+t+")";n.show(e.preview)},rt=function(n){nt=!1;c&&(c.remove(),c=undefined);o?c=lt(o):it(0);c.oninit=n?ft:vt;c.onload=bt;c.onplay=wt;c.onended=kt;c.onerror=dt;c.init()},at=function(){switch(i.behavior.beforePlay){case r.beforePlay.playlist:ut(!0);break;default:tt(o.posterUrl);n.show(e.playBtn)}},p=function(){o.getVideoFunction?(g=function(){n.hide([e.playBtn,e.preview,e.playlist]);c.play()},d(o.getVideoFunction,window,o.video)):(n.hide([e.playBtn,e.preview,e.playlist]),c.play())};e.playBtn.addEventListener("click",p);e.preview.addEventListener("click",p);var ft=function(){nt=!0;v("onPlayerLoaded");p()},vt=function(){nt=!0;splayer.playerFeatures.autoplay?(v("onPlayerLoaded"),at()):ft()},yt=function(t,r,f){var y=i?i.uiLanguage||"en":"en",s=n.createElement("div",{"class":"video-item"+(f==i.playlistIndex-1?" "+u.playlistOptions.currentVideoClass:"")+(f%4==0?" first":"")},t),c,l,a,v;r.type=="unknown"?(a=n.createElement("div",{"class":"img"},s),a.style.backgroundImage="url("+u.playlistOptions.videoNotFoundPosterUrl+")",c=n.createElement("span",{"class":"num"},s),c.innerHTML=f+1,l=n.createElement("span",{"class":"title-video"},s),l.innerHTML=h("video_not_found",i.uiLanguage)):(a=n.createElement("div",{"class":"img"},s),a.style.backgroundImage="url("+r.thumbnailUrl+")",c=n.createElement("span",{"class":"num"},s),c.innerHTML=f+1,r.title!=null&&r.title.length&&(l=n.createElement("span",{"class":"title-video"},s),l.innerHTML=r.title),v=n.createElement("div",{"class":"replay-over"},s),n.createElement("span",{"class":"icon"},v),s.addEventListener("click",function(){n.removeClass(e.playlist.getElementsByClassName(u.playlistOptions.currentVideoClass)[0],u.playlistOptions.currentVideoClass);i.playlistIndex=f+1;n.addClass(this,u.playlistOptions.currentVideoClass);o==r?p():(o=r,rt(!0))}))},et=function(n,t){var u,f,r,o;if(t=t||parseInt((n-1)/8+1),u=(t-1)*8,f=e.playlist.getElementsByClassName("page-"+t)[0],!f.getElementsByTagName("*").length)for(r=u;r<u+8&&r<=i.playlist.length-1;++r)o=i.playlist[r],yt(f,o,r)},pt=function(){var f=n.createElement("div",{"class":"playlist-overlay"},l),r,s,c,t,a,o;for(e.playlist=f,r=n.createElement("div",{"class":"playlist"},f),s=n.createElement("a",{"class":"left arrow",href:"javascript:void(0)"},r),s.addEventListener("click",function(){ot("left")}),c=parseInt(i.playlistIndex/8+1),t=1;t<i.playlist.length/8+1;t++)n.createElement("div",{"class":u.playlistOptions.playlistContentClass+" page-"+t+(t==c?" "+u.playlistOptions.currentPlaylistContentClass:" "+u.playlistOptions.nodisplayPlaylistContentClass)},r);a=n.createElement("a",{"class":"right arrow",href:"javascript:void(0)"},r);a.addEventListener("click",function(){ot("right")});o=n.createElement("a",{href:"javascript:void(0)","class":"replay-btn"},f);o.innerHTML+=h("repeat_button",i.uiLanguage);o.addEventListener("click",function(){p()})},ut=function(t){e.playlist||pt();e.playlist.setAttribute("style","font-size:"+l.clientHeight*(12/365)+"px");l.clientWidth/l.clientHeight<1.5?n.addClass(e.playlist,"square"):n.removeClass(e.playlist,"square");t?n.addClass(e.playlist,"after-play"):n.removeClass(e.playlist,"after-play");n.show(e.playlist);et(i.playlistIndex)},ot=function(t){for(var r,o=-1,s=-1,i=e.playlist.getElementsByClassName(u.playlistOptions.playlistContentClass),h=i.length,f=0;f<i.length;f++)if(n.hasClass(i[f],u.playlistOptions.currentPlaylistContentClass)){s=f;o=f-1;h=f+1;break}n.hide(i[s]);n.removeClass(i[s],u.playlistOptions.currentPlaylistContentClass);n.addClass(i[s],u.playlistOptions.nodisplayPlaylistContentClass);switch(t){case"left":o<0&&(o=i.length-1);r=o;break;default:h>i.length-1&&(h=0);r=h}n.addClass(i[r],u.playlistOptions.currentPlaylistContentClass);n.removeClass(i[r],u.playlistOptions.nodisplayPlaylistContentClass);n.show(i[r]);i[r].getElementsByTagName("*").length||et(null,r+1)},wt=function(){v("onPlayerVideoStart")},bt=function(){v("onPlayerStarted")},kt=function(){c.hide();v("onPlayerVideoComplete");v("onPlayerStopped");switch(i.behavior.afterPlay){case r.afterPlay.black:n.show([e.playBtn]);break;case r.afterPlay.nextvideo:if(i.playlistIndex++,i.playlistIndex>i.playlist.length)if(i.behavior.loopMode=="playlist")i.playlistIndex=1;else{i.playlist.length>1?ut():(tt(o.secondPosterUrl),n.show([e.playBtn]));break}o=i.playlist[i.playlistIndex-1];rt(!0);break;case r.afterPlay.picture:tt(o.secondPosterUrl);n.show([e.playBtn]);break;case r.afterPlay.playlist:i.playlist.length>1?ut():(tt(o.secondPosterUrl),n.show([e.playBtn]));break;case r.afterPlay.repeat:p()}},dt=function(){c&&(c.remove(),c=undefined);it(0)};s.getParams(i,function(n){i=n;i.onPlayerReady&&d(i.onPlayerReady,window);o=i.playlist[i.playlistIndex-1];rt(i.behavior.hasOwnProperty("autoplay")&&i.behavior.autoplay.toString()=="true")},function(){i.onPlayerReady&&d(i.onPlayerReady,window);it(0)});this.addEventListener=function(n,t){w[n]&&w[n].push(t)};this.setVideoUrls=function(n,t){var r,i;if(g){for(o.getVideoFunction=undefined,o.video=t,r=0;r<o.video.length;r++)i=o.video[r],i["default"]&&(o.default_url=i),i.type=s.detectVideoType(i.url);o.default_url||(o.default_url=o.video[0]);g();g=null}};this.playVideo=function(){nt&&p()}}}}();